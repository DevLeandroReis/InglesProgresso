/* === Reset básico e tokens === */
:root{
  --bg:#0f1225;
  --card:#161a34;
  --muted:#98a2b3;
  --text:#eef2ff;
  --accent:#7c3aed;
  --accent-2:#22d3ee;
  --danger:#ef4444;
  --done:#10b981;
  --today:#f59e0b;
  --grid:#303457;
}
*{box-sizing:border-box}
html,body{min-height:100%}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;
  /* Gradiente base contínuo: topo mais claro → base mais escura */
  background:
    radial-gradient(1200px 800px at 80% -10%, rgba(124,58,237,.18), transparent 70%),
    radial-gradient(1000px 800px at -10% 10%, rgba(34,211,238,.12), transparent 65%),
    linear-gradient(180deg, #1a1f3a 0%, #11162e 40%, #0c1024 70%, #080a17 100%);
  background-repeat: no-repeat;
  color:var(--text);
}

/* === Header === */
.app-header{display:flex;flex-direction:column;gap:.25rem;align-items:center;padding:28px 16px}
.brand{display:flex;align-items:center;gap:.6rem}
.app-emoji{font-size:28px}
.app-header h1{font-size:28px;margin:0;font-weight:800;letter-spacing:.4px}
.subtitle{margin:0;color:var(--muted)}

/* === Container === */
.container{max-width:1100px;margin:0 auto;padding:0 16px 64px;display:flex;flex-direction:column;gap:18px}

.controls-card,.schedule-card,.grid-card{background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
.controls-card{padding:12px}
.controls-card details.settings{border-radius:12px}
.controls-card details.settings > summary{cursor:pointer;font-weight:800;padding:8px 6px;color:var(--text)}
.controls-card details.settings[open] > summary{margin-bottom:8px}
.schedule-card{padding:16px}
.grid-card{padding:16px}
/* Achievements */
.achievements-card{padding:16px}
.achievements{display:flex;flex-direction:column;gap:12px}
.achievement-header{display:flex;justify-content:space-between;align-items:center}
.achievement-title{font-weight:800}
.progress-wrap{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:10px;overflow:hidden}
.progress-bar{height:10px;background:linear-gradient(90deg, rgba(124,58,237,.9), rgba(34,211,238,.9));width:0%}
.prize{background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:10px;display:flex;gap:10px;align-items:center}
.prize .emoji{font-size:20px}
.prize .name{font-weight:700}

/* === Controls === */
.controls{display:flex;flex-wrap:wrap;gap:12px;align-items:end;justify-content:space-between}
.notice{padding:10px 12px;border-radius:8px;margin-bottom:8px;font-size:.95rem;width:100%}
.notice.error{background:#fff3f3;color:#8a1f1f;border:1px solid #f3c1c1}
.notice.warn{background:#fff8e6;color:#7a4d00;border:1px solid #f2d39c}
.control-group{display:flex;flex-direction:column;gap:6px}
.control-group label{font-weight:600;color:var(--muted)}
.control-group input[type="date"], .control-group select{
  background:var(--card);border:1px solid rgba(255,255,255,.1);color:var(--text);padding:10px 12px;border-radius:10px;min-width:180px;outline:none
}
.buttons{display:flex;gap:8px;align-items:center}
.buttons .btn + .btn{margin-left:0}
.btn{background:var(--accent);border:none;color:white;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer;transition:.15s transform,.15s filter}
.btn:hover{transform:translateY(-1px);filter:brightness(1.05)}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,.14);color:var(--text)}
.btn.file{display:inline-flex;align-items:center;gap:8px;position:relative;overflow:hidden}
.btn.file input{position:absolute;inset:0;opacity:0;cursor:pointer}
.range{flex:1;display:flex;justify-content:space-between;align-items:center}
.range-text{color:var(--muted)}

/* === Schedule Table === */
.schedule-table{display:grid;grid-template-columns:1fr;gap:10px;align-items:center}
.schedule-table .row{display:block}
.badge{display:none}
.activity{background:var(--card);border:1px solid rgba(255,255,255,.08);padding:10px 12px;border-radius:10px;display:flex;align-items:center;gap:10px;min-width:0;flex-wrap:wrap}
.activity .emoji{font-size:18px}
.activity .name{font-weight:800}
.activity .time{color:var(--muted);font-size:.85rem}
.activity .duration{color:var(--muted);font-size:.8rem}
.activity .time::before{content:'·';margin:0 6px;color:rgba(255,255,255,.25)}
.activity .duration::before{content:'·';margin:0 6px;color:rgba(255,255,255,.25)}
.activity .mark-today{margin-left:auto;flex-shrink:0}
.btn.mini{padding:6px 10px;font-size:.85rem;border-radius:8px}
.btn.mini.done-today{background:var(--done)}

/* === Activities Grid (mobile-first) === */
:root{ --sq:16px; --gap:6px }
@media (min-width: 480px){ :root{ --sq:18px; --gap:7px } }
@media (min-width: 900px){ :root{ --sq:18px; --gap:8px } }

.activities{display:flex;flex-direction:column;gap:18px}
.progress-chart{display:flex;flex-direction:column;gap:10px}
.chart-row{display:grid;grid-template-columns: minmax(140px, 1fr) 6fr auto;gap:10px;align-items:center;background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:8px 10px}
.chart-row.overall{border:1px solid rgba(124,58,237,.5)}
.chart-label{display:flex;align-items:center;gap:8px;font-weight:700}
.chart-label .emoji{font-size:18px}
.chart-bar{position:relative;height:14px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:8px;overflow:hidden}
.chart-fill{position:absolute;inset:0 auto 0 0;width:0%;background:linear-gradient(90deg, rgba(16,185,129,1), rgba(34,211,238,.9));}
.chart-meta{color:var(--muted);font-weight:700;min-width:78px;text-align:right}
.legend{display:flex;gap:12px;align-items:center}
.legend-item{display:inline-flex;gap:6px;align-items:center;color:var(--muted)}
.demo{display:inline-block}
.footer{max-width:1100px;margin:18px auto;padding:0 16px;color:var(--muted)}

/* ===== Celebração (confete) ===== */
.celebration-overlay{position:fixed;inset:0;pointer-events:none;z-index:9999;overflow:hidden}
.confetti{position:absolute;top:-10vh;opacity:.95;border-radius:2px;animation:confetti-fall linear forwards}
@keyframes confetti-fall{
  0%{ transform: translateY(-10vh) rotate(0deg); }
  100%{ transform: translateY(110vh) rotate(720deg); }
}

/* ===== Animação de conquista ===== */
.achievement-overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.35);backdrop-filter:blur(2px);z-index:10000}
.ach-card{position:relative;background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.12);padding:18px 22px;border-radius:16px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,.4);animation:pop-in .3s ease-out}
.ach-card .medal{font-size:44px;animation:pulse 1.4s ease-in-out infinite}
.ach-card .title{font-weight:900;letter-spacing:.3px;margin-top:8px}
.ach-card .name{color:var(--muted);font-weight:700}
.ach-card .ring{position:absolute;inset:-12px;pointer-events:none;border-radius:20px;border:2px solid rgba(124,58,237,.6);animation:ring 1.8s ease-out infinite}
@keyframes pop-in{0%{transform:scale(.8);opacity:0}100%{transform:scale(1);opacity:1}}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}
@keyframes ring{0%{opacity:.8;box-shadow:0 0 0 0 rgba(124,58,237,.6)}100%{opacity:0;box-shadow:0 0 0 24px rgba(124,58,237,0)}}

/* Responsive */
@media (max-width: 800px){
  .schedule-table{grid-template-columns:1fr;gap:8px;align-items:center}
  .activity{padding:8px 10px;flex-wrap:wrap}
  .activity .mark-today{width:100%;margin-left:0;margin-top:8px}
  /* grade mensal já é mobile-first */
}
